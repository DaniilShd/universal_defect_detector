# Задание 1. Постановка задачи и жизненный цикл проекта

## 1. Формулировка задачи

### 1.1. Бизнес-задача
На производственных линиях металлургических и машиностроительных предприятий контроль качества поверхности материалов выполняется визуально или с помощью классических алгоритмов компьютерного зрения, что требует высокой квалификации оператора и не обеспечивает стабильную точность.

**Бизнес-задача заказчика (ПАО «Северсталь»)** — автоматизировать процесс обнаружения дефектов на металлических и неметаллических поверхностях для снижения доли пропущенного брака и сокращения времени контроля.

### 1.2. Техническая (ML/CV) формулировка
Задача заключается в создании большой предобученной модели (foundation CV model), способной:
- Выделять и локализовать дефекты на изображениях промышленных поверхностей
- Обучаться в self-supervised манере для уменьшения потребности в разметке
- Служить «учителем» для генерации меньших моделей (через дистилляцию) для разных типов поверхностей
- Обеспечивать скорость и точность, не уступающую решениям на основе YOLO, но без использования её архитектуры
- Быть воспроизводимой и применимой в промышленной среде (edge/сервер)

## 2. Анализ предметной области

### 2.1. Контекст и участники процесса
- **Отрасль**: металлургия, машиностроение, контроль качества материалов
- **Оборудование**: линии прокатки, покраски, резки, сварки; промышленные камеры высокого разрешения (линейные или матричные)
- **Типичные сценарии**: инспекция поверхности листов, сварных швов, покрытий; проверка деталей после обработки или окрашивания
- **Участники процесса**:
  - Операторы контроля качества
  - Инженеры по визуальной инспекции
  - Специалисты по ML/IT-интеграции
  - Руководители производственных подразделений

### 2.2. Ключевые метрики эффективности

| Метрика | Базовое значение | Целевое значение |
|---------|------------------|------------------|
| Время проверки одного изделия | 10–15 сек | ≤ 0.2 сек (200 мс) |
| Ошибки пропуска брака (False Negative) | ~3% | ≤ 0.5% |
| Доля ручных проверок | 100% | ≤ 30% |
| Recall (по критическим дефектам) | — | ≥ 0.95 |
| Precision | — | ≥ 0.85 |
| Время адаптации к новой поверхности | >1 неделя | ≤ 1 день |

## 3. Обзор существующих решений

| Решение / подход | Тип задачи | Методы и инструменты | Преимущества | Недостатки | Лицензия / требования |
|------------------|------------|----------------------|---------------|------------|----------------------|
| PatchCore (Amazon Science) | Обнаружение аномалий | Feature memory bank на предобученных backbone (ResNet, ViT) | Простота реализации, высокая точность на MVTec AD, хорошая локализация дефектов | Требует памяти для хранения фич; плохо масштабируется на большие датасеты | MIT / GPU для инференса |
| PaDiM | Локализация аномалий | Patch Distribution Modeling (Mahalanobis distance) | Высокая точность и стабильность; малые вычислительные затраты | Зависимость от выбранного backbone | MIT / GPU/CPU совместимо |
| DINOv2 (Meta AI) | Self-supervised обучение, feature extraction | ViT backbone, SSL pretraining без меток | Отличные представления для downstream задач, хорошо переносится на новые домены | Высокая вычислительная стоимость обучения | Apache / Требует GPU кластер |
| DETR / Deformable DETR | Обнаружение и локализация объектов | Трансформерная архитектура без NMS | End-to-end обучение, гибкость, стабильность | Более медленное обучение, сложная настройка | Apache / GPU обязательный |

**Вывод:** Оптимальной стратегией является комбинация self-supervised backbone (DINOv2) + легкие downstream модели для аномалий и детекции (PatchCore, DETR) с последующей дистилляцией в меньшие student-модели под конкретные поверхности.

## 4. Стейкхолдеры проекта

| Группа | Роль / интерес |
|--------|----------------|
| Заказчик (ПАО «Северсталь») | Улучшение качества контроля, снижение издержек |
| Пользователи (операторы, инженеры) | Получение надёжного инструмента дефектоскопии |
| Разработчик (магистрант) | Исследование и реализация модели |
| Научный руководитель | Методологическая поддержка и проверка гипотез |
| ИТ-интеграторы | Развёртывание модели в инфраструктуре (edge/сервер) |
| Регуляторы / стандарты | Соответствие требованиям безопасности данных |

## 5. Ограничения проекта

| Категория | Описание |
|-----------|----------|
| Аппаратные | Целевое внедрение — GPU-сервер или edge-устройство уровня Jetson / RTX A4000; ограничение по latency ≤ 200 мс |
| Временные | Срок выполнения: 14.10.2025 — 01.07.2026 (~37 недель), включая исследование и написание отчёта |
| Юридические | Доступ к производственным данным — по NDA |
| Бюджетные | Без использования платных облачных ресурсов; только открытые репозитории и локальное обучение |

## 6. Критерии успеха

**Количественные:**
- Recall (по критическим дефектам) ≥ 0.95
- Precision ≥ 0.85
- Latency ≤ 200 мс
- Размер student-модели ≤ 200 МБ
- Время адаптации на новую поверхность ≤ 1 день

**Качественные:**
- Система не требует ручной настройки перед запуском
- Код, веса и конфигурации полностью воспроизводимы (GitHub + Docker)
- Модель поддерживает быстрое fine-tuning (дистиляция) под новые типы данных

## 7. Границы проекта

**Входит:**
- Разработка и исследование foundation CV-модели (на базе self-supervised backbone, напр. DINOv2)
- Реализация механизмов дистилляции и создания «дочерних» моделей под разные типы поверхностей
- Оценка применимости синтетических данных и методов domain adaptation
- Сравнение метрик и скорости для моделей разных размеров

**Не входит:**
- Полноценная интеграция в производственные системы (MES/SCADA)
- Обработка персональных данных (распознавание лиц, видеоаналитика людей)
- Разработка пользовательского интерфейса или веб-сервиса

## 8. Основные риски и способы их снижения

| Риск | Вероятность | Влияние | Меры по снижению |
|------|-------------|---------|------------------|
| Недостаток размеченных данных | Высокая | Среднее | Использование self-supervised обучения (DINOv2), синтетика |
| Domain shift между поверхностями | Средняя | Высокое | Fine-tuning дочерних моделей, domain randomization |
| Недостаток вычислительных мощностей | Средняя | Среднее | Использование предобученных весов, дистилляция |
| Ограничения NDA по данным | Средняя | Среднее | Локальное хранение, анонимизация данных |
| Несоответствие скорости требованиям | Низкая | Высокое | Оптимизация (TensorRT, ONNX Runtime) |

## 9. Жизненный цикл проекта (этапы)

| Этап | Содержание | Период |
|------|-------------|---------|
| 1. Анализ и сбор данных | Получение и изучение датасета, анализ формата | Октябрь–Ноябрь 2025 |
| 2. Исследование и выбор архитектуры | Сравнение SSL-подходов, выбор backbone (DINOv2 / MAE) | Ноябрь–Декабрь 2025 |
| 3. Разработка baseline-моделей | Реализация PatchCore / DETR, оценка метрик | Январь–Февраль 2026 |
| 4. Дистилляция и оптимизация | Teacher–student обучение, анализ latency | Март–Апрель 2026 |
| 5. Синтетические данные и domain adaptation | Тестирование генерации и transfer learning | Май 2026 |
| 6. Сравнение, анализ, отчёт | Подведение итогов, подготовка к защите | Июнь 2026 |

## 10. Предварительный вывод

Данный проект направлен на разработку универсальной предобученной CV-модели для обнаружения дефектов на промышленных поверхностях, ориентированной на промышленную применимость.

Главная научная новизна — исследование комбинации self-supervised обучения, дистилляции и синтетических данных для формирования эффективных дочерних моделей без потери скорости и точности относительно YOLO-подобных решений.